<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<script>
			var url = 'https://hq.tigerbrokers.com/fundamental/finance_calendar/getType/2017-02-26/2017-06-10';
			
			//封装一个get请求的方法
			function getJSON(url){
				return new Promise(function(resolve, reject){
					var XHR = new XMLHttpRequest();
					XHR.open('GET', url, true);
					XHR.onreadystatechange = function(){
						console.log(XHR.readyState);
						if(XHR.readyState == 4){
							if(XHR.status == 200){
								try{
									var response = JSON.parse(XHR.responseText);
									resolve(response);
								}catch(e){
									reject(e);
								}
							}else{
								reject(XHR.status);
							}
						}
					}
					XHR.send();
				})
			}
			
			getJSON(url).then(resp => console.log(resp),error0 => console.log(error0));
		</script>
	</body>
</html>
